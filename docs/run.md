# Способы запуска скрипта Guido

Этот документ описывает различные методы запуска скрипта "Guido" на целевой Linux-машине. Все команды предполагается выполнять от имени суперпользователя (root).

## 1. Bootstrap-метод (Рекомендуемый 'стелс'-способ)

Этот метод является основным для "боевого" применения. Он обеспечивает надежную доставку полезной нагрузки через терминал и гарантирует полную очистку следов (включая историю команд и временные файлы) после завершения работы.

**Подготовка на машине сборки:**
1.  Сгенерируйте артефакты с помощью `build_installer.sh`, обязательно используя опцию `--split-oneliner`, чтобы создать файлы-части (`oneliner_part_*.b64part`).
    ```bash
    ./build_installer.sh --split-oneliner 49152
    ```
2.  Вам понадобятся сгенерированные файлы-части и файл с инструкциями `docs/bootstrap.md`.

**Запуск на целевой машине:**

**Всегда копируйте команды напрямую из актуального файла `docs/bootstrap.md`!** Ниже приведен только общий принцип.

1.  **ЭТАП 1: Подготовка среды.**
    *   Скопируйте **весь подготовительный блок** из `docs/bootstrap.md` и выполните его на целевой машине.
    *   Это создаст безопасное окружение, временные файлы в памяти и определит функцию `guido_run` для финального запуска.

2.  **ЭТАП 2: Передача частей.**
    *   Для **каждого** файла-части (`oneliner_part_000.b64part`, `oneliner_part_001.b64part` и т.д.):
        *   На машине сборки скопируйте содержимое файла-части.
        *   На целевой машине скопируйте соответствующий блок `cat <<'END_OF_GUIDO' ...` из `docs/bootstrap.md`, вставьте в него скопированные данные и выполните.

3.  **ЭТАП 3: Запуск и самоуничтожение.**
    *   После передачи **всех** частей, выполните на целевой машине команду `guido_run`.
        ```bash
        # Запуск без аргументов
        guido_run

        # Запуск с передачей аргументов в Guido
        guido_run --sneaky --pretty
        ```
    *   После выполнения скрипта Guido, сессия будет автоматически очищена и принудительно завершена.

## 2. Запуск через `guido_installer.sh` (Альтернативный способ)

Этот метод используется, когда у вас есть возможность легко скопировать на целевую машину один исполняемый файл.

**Подготовка:**
*   Соберите `guido_installer.sh` с помощью флага `--legacy-installer` (см. `prepare.md`).
*   Скопируйте `build_output/guido_installer.sh` на целевую машину.

**Запуск:**
1.  Сделайте установщик исполняемым:
    ```bash
    chmod +x guido_installer.sh
    ```
2.  Запустите установщик (он передаст аргументы основному скрипту Guido):
    ```bash
    ./guido_installer.sh --pretty --sneaky
    ```

## 3. Прямой запуск `guido.sh` (Для разработки и отладки)

Этот метод используется, когда у вас есть полный исходный код (`guido_payload/`) на целевой машине.

**Подготовка:**
*   Скопируйте весь каталог `guido_payload/` на целевую машину.

**Запуск:**
```bash
cd /путь/к/guido_payload/
chmod +x guido.sh
./guido.sh --pretty --sneaky